(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-questionnaire_detail-index"],{1590:function(t,i,e){"use strict";var a=e("4ea4");e("e25e"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("89dc")),n=getApp(),o={data:function(){return{infos:[],id:"",list:[]}},onLoad:function(t){var i=this,e=n.globalData.userInfo.id,a=n.globalData.userInfo.token,o=n.globalData.site_url+"/appapi/?s=Home.Papershow";this.id=t.id,s.default.requestApi(o,{uid:e,token:a,id:t.id}).then((function(t){if(0!=t.data.code)return uni.showToast({title:t.data.msg,icon:"none"}),void setTimeout((function(){uni.redirectTo({url:"/pages/login/index"})}),1500);for(var e=void 0!=t.data.info[0].list?t.data.info[0].list:[],a=0;a<e.list.length;a++){for(var s=e.list[a],n=[],o=[],u=[],l=0;l<s.option.length;l++)n[l]=parseInt(s.count[l]/e.count_num*100),o[l]="width:"+parseInt(s.count[l]/e.count_num*100)+"%";if(e.list[a].width=n,e.list[a].widths=o,0==s.answer.length){for(l=0;l<s.option.length;l++)u[l]=0;e.list[a].answerlist=u}else e.list[a].answerlist=s.answer}i.infos=e}))},methods:{previewImage:function(t){var i=[];i.push(t),uni.previewImage({urls:i,current:i[0]})},chooseAnswer:function(t){var i=this,e=t.currentTarget.dataset.index,a=t.currentTarget.dataset.key,s=this.infos.list[e],n=s.answerlist;if(1==s.count_max){if(0==n[a]){for(var o=0;o<n.length;o++)n[o]=0;n[a]=1}}else 0==n[a]?n[a]=1:n[a]=0;i.infos.list[e].answerlist=n,i.$set(i.infos.list[e],n,n),i.$forceUpdate()},submit:function(){for(var t=this,i=this,e={},a=this.infos.list,o=0;o<a.length;o++){for(var u=a[o],l=0,r=0,c=0;c<u.answerlist.length;c++)1==u.answerlist[c]&&(l=1,r+=1);if(0==l)return void uni.showToast({title:"请选择答案",icon:"none"});if(r<u.count_min)return void uni.showToast({title:"至少选择"+u.count_min+"个答案",icon:"none"});e[u.id]=u.answerlist}var d=n.globalData.userInfo.id,f=n.globalData.userInfo.token,v=this.infos.id,g=JSON.stringify(e),h=n.globalData.site_url+"/appapi/?s=Home.Updatepaper";s.default.requestApi(h,{uid:d,token:f,id:v,answer:g}).then((function(e){if(0==e.data.code){var a=n.globalData.site_url+"/appapi/?s=Home.Papershow";s.default.requestApi(a,{uid:d,token:f,id:t.id}).then((function(t){for(var e=t.data.info[0].list,a=0;a<e.list.length;a++){for(var s=e.list[a],n=[],o=[],u=[],l=0;l<s.option.length;l++)n[l]=parseInt(s.count[l]/e.count_num*100),o[l]="width:"+parseInt(s.count[l]/e.count_num*100)+"%";if(e.list[a].width=n,e.list[a].widths=o,0==s.answer.length){for(var r=0;r<s.option.length;r++)u[r]=0;e.list[a].answerlist=u}else e.list[a].answerlist=s.answer}i.infos=e}))}uni.showToast({title:e.data.msg,icon:"none"})}))}}};i.default=o},"441f":function(t,i,e){"use strict";e.r(i);var a=e("d32f"),s=e("90e5");for(var n in s)"default"!==n&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("b359");var o,u=e("f0c5"),l=Object(u["a"])(s["default"],a["b"],a["c"],!1,null,"58a1408e",null,!1,a["a"],o);i["default"]=l.exports},"5e7a":function(t,i,e){var a=e("9bac");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("0785dfc5",a,!0,{sourceMap:!1,shadowMode:!1})},"90e5":function(t,i,e){"use strict";e.r(i);var a=e("1590"),s=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a},"9bac":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".qu-submit1[data-v-58a1408e]{position:fixed;bottom:0;width:100%;height:%?100?%;text-align:center;line-height:%?100?%;background:#fff;color:#b4b4b4;box-shadow:%?0?% %?10?% %?10?% %?10?% rgba(0,0,0,.2)}.qu-submit[data-v-58a1408e]{position:fixed;bottom:0;width:100%;height:%?100?%;text-align:center;line-height:%?100?%;background:#fff;color:#e32a2a;box-shadow:%?0?% %?10?% %?10?% %?10?% rgba(0,0,0,.2)}.que-qu-li-l[data-v-58a1408e]{clear:both;overflow:hidden;clear:both;overflow:hidden;position:relative;padding-top:%?30?%}.que-qu-li-num[data-v-58a1408e]{color:#b4b4b4;font-size:%?22?%;float:left;position:absolute;margin-left:%?10?%}.que-qu-li-heng-selected[data-v-58a1408e]{width:50%;height:%?16?%;background:#f74f29;border-radius:%?50?%}.que-qu-li-heng[data-v-58a1408e]{width:55%;height:%?16?%;background:#f0f0f0;border-radius:%?50?%;margin-top:%?10?%;float:left}.que-qu-li-mes[data-v-58a1408e]{float:left;margin-left:%?20?%;font-size:%?30?%;position:relative;bottom:%?4?%;width:90%}.que-qu-li-img[data-v-58a1408e]{width:%?34?%;height:%?34?%;float:left}.que-qu-li[data-v-58a1408e]{border:%?1?% solid #ebebeb;padding:0 %?30?% %?30?% %?30?%}.que-qu-title-type[data-v-58a1408e]{color:#b4b4b4}.que-qu-title-xing[data-v-58a1408e]{color:#e32a2a}.que-qu-title[data-v-58a1408e]{padding:%?30?% 0 %?30?% 0;font-size:%?30?%;letter-spacing:%?1?%}.que-qu[data-v-58a1408e]{width:92%;margin:0 auto}.que-title-date-num[data-v-58a1408e]{float:right}.que-title-date[data-v-58a1408e]{margin-top:%?20?%;font-size:%?24?%;color:#969696}.que-title-text[data-v-58a1408e]{font-size:%?30?%;letter-spacing:%?1?%;font-weight:500}.que-title[data-v-58a1408e]{width:92%;margin:0 auto;padding:%?30?% 0 %?30?% 0;border-bottom:%?1?% solid #f0f0f0}uni-page-body[data-v-58a1408e]{padding-bottom:%?100?%}",""]),t.exports=i},b359:function(t,i,e){"use strict";var a=e("5e7a"),s=e.n(a);s.a},d32f:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"que-title"},[e("v-uni-view",{staticClass:"que-title-text"},[t._v(t._s(t.infos.title))]),e("v-uni-view",{staticClass:"que-title-date"},[e("v-uni-text",[t._v("截止时间: "+t._s(t.infos.endtime))]),e("v-uni-text",{staticClass:"que-title-date-num"},[t._v("参与人数: "+t._s(t.infos.count_num)+"人")])],1)],1),t._l(t.list,(function(i,a){return[e("v-uni-view",{attrs:{"data-index":a,hidden:0==i},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chsss.apply(void 0,arguments)}}},[t._v("111111111")])]})),e("v-uni-view",{staticClass:"que-qu"},[t._l(t.infos.list,(function(i,a){return void 0!=t.infos.list?[e("v-uni-view",{key:a+"_0",staticClass:"que-qu-title"},[e("v-uni-text",{staticClass:"que-qu-title-xing"},[t._v("*")]),t._v(t._s(a+1)+"、"+t._s(i.title)),1==i.count_max?e("v-uni-text",{staticClass:"que-qu-title-type"},[t._v("（单选）")]):t._e(),i.count_max>1?e("v-uni-view",{staticClass:"que-qu-title-type"},[t._v("（多选，最多选"+t._s(i.count_max)+"项，最少选"+t._s(i.count_min)+"项）")]):t._e()],1),e("v-uni-view",{key:a+"_1",staticClass:"que-qu-li"},[t._l(i.option,(function(s,n){return[e("v-uni-view",{key:n+"_0",staticClass:"que-qu-li-l"},[0==t.infos.status&&1==i.count_max?[0==i.answerlist[n]?e("v-uni-image",{staticClass:"que-qu-li-img",attrs:{"data-index":a,"data-key":n,src:"/static/images/select1.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseAnswer.apply(void 0,arguments)}}}):t._e(),1==i.answerlist[n]?e("v-uni-image",{staticClass:"que-qu-li-img",attrs:{"data-index":a,"data-key":n,src:"/static/images/selected1.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseAnswer.apply(void 0,arguments)}}}):t._e()]:t._e(),1!=t.infos.status&&2!=t.infos.status||1!=i.count_max?t._e():[0==i.answerlist[n]?e("v-uni-image",{staticClass:"que-qu-li-img",attrs:{src:"/static/images/select1.png"}}):t._e(),1==i.answerlist[n]?e("v-uni-image",{staticClass:"que-qu-li-img",attrs:{src:"/static/images/selectok1.png"}}):t._e()],0==t.infos.status&&i.count_max>1?[0==i.answerlist[n]?e("v-uni-image",{staticClass:"que-qu-li-img",attrs:{"data-index":a,"data-key":n,src:"/static/images/select2.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseAnswer.apply(void 0,arguments)}}}):t._e(),1==i.answerlist[n]?e("v-uni-image",{staticClass:"que-qu-li-img",attrs:{"data-index":a,"data-key":n,src:"/static/images/selected2.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseAnswer.apply(void 0,arguments)}}}):t._e()]:t._e(),(1==t.infos.status||2==t.infos.status)&&i.count_max>1?[0==i.answerlist[n]?e("v-uni-image",{staticClass:"que-qu-li-img",attrs:{src:"/static/images/select2.png"}}):t._e(),1==i.answerlist[n]?e("v-uni-image",{staticClass:"que-qu-li-img",attrs:{src:"/static/images/selectok2.png"}}):t._e()]:t._e(),e("v-uni-view",{staticClass:"que-qu-li-mes"},[0!=t.infos.status||0!=i.answerlist[n]&&1!=i.answerlist[n]?t._e():e("v-uni-view",{attrs:{"data-index":a,"data-key":n},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseAnswer.apply(void 0,arguments)}}},[t._v(t._s(i.option[n]))]),1==t.infos.status||2==t.infos.status?e("v-uni-view",[t._v(t._s(i.option[n]))]):t._e(),void 0!=i.thumbs_json[n]&&""!=i.thumbs_json[n]?e("v-uni-image",{attrs:{src:i.thumbs_json[n],mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage(i.thumbs_json[n])}}}):t._e(),e("v-uni-view",[1==t.infos.status||2==t.infos.status?e("v-uni-view",{staticClass:"que-qu-li-heng"},[e("v-uni-view",{staticClass:"que-qu-li-heng-selected",style:i.widths[n]})],1):t._e(),1==t.infos.status||2==t.infos.status?e("v-uni-text",{staticClass:"que-qu-li-num"},[t._v(t._s(i.count[n])+"人（"+t._s(i.width[n])+"%）")]):t._e()],1)],1)],2)]}))],2)]:t._e()}))],2),0==t.infos.status?e("v-uni-view",{staticClass:"qu-submit",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submit.apply(void 0,arguments)}}},[t._v("提交")]):t._e(),1==t.infos.status?e("v-uni-view",{staticClass:"qu-submit1"},[t._v("已参与")]):t._e(),2==t.infos.status?e("v-uni-view",{staticClass:"qu-submit1"},[t._v("已结束")]):t._e()],2)},n=[]}}]);